# Papa Don't Preach Parser

Парсер для извлечения данных о товарах с сайта Papa Don't Preach и сохранения их в CSV файл в формате TSUM.

## Описание

Этот парсер автоматически обрабатывает список ссылок на товары, извлекает информацию о каждом товаре (название, бренд, изображения, описание, размеры и т.д.) и сохраняет данные в CSV файл, совместимый с форматом TSUM.

## Возможности

- ✅ Автоматическая обработка списка ссылок из файла
- ✅ Извлечение данных о товарах (название, бренд, артикул, описание, размеры)
- ✅ Обработка изображений согласно требованиям:
  - **Image2**: первое фото из группы
  - **Ext Images**: второе и третье фото (если есть 3+ фото), или только второе (если 2 фото)
- ✅ Автоматическое удаление проблемных кавычек из CSV
- ✅ Сохранение в формате CSV с разделителем `;`
- ✅ Поддержка кодировки UTF-8 с BOM для корректного отображения в Excel

## Требования

- Python 3.6+
- Библиотеки: `requests`, `beautifulsoup4`

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/papa-dont-preach-parser.git
cd papa-dont-preach-parser
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

Или установите вручную:
```bash
pip install requests beautifulsoup4
```

## Использование

1. Создайте файл `links.txt` в корне проекта со списком ссылок на товары (по одной ссылке на строку). 
   Можно использовать файл `links.txt.example` как шаблон:
```
https://www.papadontpreach.com/products/once-in-a-blue-moon-lehenga-set
https://www.papadontpreach.com/products/green-playsuit-in-blinding-heart
...
```

2. Запустите парсер:
```bash
python parser.py
```

3. Результаты будут сохранены в файл `Papa_Dont_Preach_output.csv`

## Дополнительные команды

### Очистка существующего CSV файла от кавычек

Если нужно очистить уже созданный CSV файл от проблемных кавычек:
```bash
python parser.py clean
```

Или используйте отдельный скрипт:
```bash
python clean_csv.py
```

## Формат выходного файла

CSV файл содержит следующие колонки (разделитель `;`):

- `URL` - ссылка на товар
- `ID` - ID товара
- `Name` - название товара
- `Brand` - бренд
- `Article` - артикул (SKU)
- `Gender` - пол (пока не заполняется)
- `Image2` - первое изображение
- `Ext Images` - дополнительные изображения (2-е и 3-е фото, разделенные запятой)
- `Description` - описание товара
- `Sizes` - размеры (разделенные запятой)
- `Color` - цвет (пока не заполняется)
- `Category` - категория товара
- `ID2` - уникальный идентификатор (UUID)
- `Combine` - поле для комбинирования (пустое)

## Особенности обработки изображений

- Если у товара **1 фото**: в `Ext Images` ничего не записывается
- Если у товара **2 фото**: в `Ext Images` записывается только второе фото
- Если у товара **3+ фото**: в `Ext Images` записываются второе и третье фото через запятую

## Структура проекта

```
papa-dont-preach-parser/
├── parser.py              # Основной скрипт парсера
├── clean_csv.py           # Скрипт для очистки CSV от кавычек
├── requirements.txt       # Зависимости проекта
├── links.txt.example      # Пример файла со ссылками
├── links.txt              # Файл со списком ссылок на товары (создается пользователем)
├── Papa_Dont_Preach_output.csv  # Выходной CSV файл (создается автоматически)
├── README.md              # Документация
└── .gitignore            # Игнорируемые файлы для Git
```

## Обработка ошибок

- Парсер автоматически пропускает товары, которые не удалось обработать
- Между запросами есть задержка в 1 секунду, чтобы не перегружать сервер
- Все ошибки выводятся в консоль для отладки

## Лицензия

Этот проект создан в образовательных целях. Используйте ответственно и соблюдайте правила использования сайта Papa Don't Preach.

## Автор

Создано для парсинга данных с сайта Papa Don't Preach.

## Поддержка

Если у вас возникли проблемы или вопросы, создайте Issue в репозитории.

